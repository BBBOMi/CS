# 데이터 베이스

## 1. 일괄 처리 시스템

* 시스템 중심의 자료 처리 방식
* 테이프와 같은 순차 접근 방법을 사용하는 업무에 적합
* 각 트랜잭션당 처리 비용이 적게 든다
* 단위 시간당 처리하는 작업 수가 많으므로, 시스템 성능은 높다.

## 2. 스키마 (Schema)

* 전체적인 논리적 설계를 의미
* 데이터의 객체, 성질, 관계, 관계들의 제약 조건에 관한 정의를 총칭
* 시간에 따라 불변
* 데이터의 구조적 특징을 의미, 인스턴스에 의해 규정

1. 외부 스키마
   * 각각의 사용자 그룹이 원하는 형태의 논리적 구조를 정의
   * 조직 전체가 아닌 일부분을 정의
   * 각각의 사용자 그룹을 위해 만들어져야 하므로 **여러 개가 존재**한다.
   * 응용 프로그래머와 사용자와 관련된 개체 및 개체들의 관계 및 제약 조건
2. 개념 스키마
   * 모든 응용 시스템과 사용자들이 필요로 하는 데이터를 통합한 조직 전체의 데이터베이스 구조를 논리적으로 정의하는 개념으로 **하나만 존재**
   * 데이터 베이스 전체를 정의
   * 한 기관 전체에서 필요로 하는 모든 개체
   * 모든 개체의 관계
   * 유지해야 할 제약 사항
   * 데이터베이스의 접근 권한, 보안, 무결성 규칙
3. 내부 스키마
   * 전체 데이터베이스의 물리적 저장 형태를 기술하는 개념
   * 개념 스키마의 물리적 저장 형태를 정의하는 개념으로 **하나만 존재**
   * 저장될 내부 레코드(저장 레코드)의 형식
   * 인덱스의 유무
   * 저장 데이터 항목의 표현 방법
   * 내부 레코드의 물리적 순서
4. 데이터의 독립성
   1. 응용 프로그램의 수정 없이 논리적 데이터 스키마를 변경할 수 있다.
   2. 응용 프로그램의 변경 없이 물리적 데이터 구조를 변경할 수 있다.

## 3.정규형

1. 하나의 릴레이션(테이블)에 하나의 의미만 존재할 수 있도록 분해해 나가는 과정

2. 기본 정규형 : 1NF, 2NF, 3NF, BCNF

3. 고급 정규형 : 4NF, 5NF

4. 목적
   * 구성되는 모든 테이블이 중복되지 않게 효과적으로 데이터베이스 내에 표현이 가능하도록 한다.
   * 보다 간단한 연산자에 의해 효과적인 연산이 가능하도록 구성한다.
   * 삽입 이상, 삭제 이상, 갱신 이상의 문제가 발생하지 않도록 한다.
   * 새로운 형태의 데이터가 삽입될 때 테이블 설계를 재구성할 필요성을 감소시킨다.

5. 필요성

   * 자료의 저장 공간을 최소화한다.
   * 자료의 불일치를 최소화시킨다.
   * 자료 구조를 안정화시킨다.
   * 자료의 삽입, 삭제, 갱신 이상을 방지한다.

   ****

6. 제1 정규형

   1. **어떤 릴레이션에 속한 모든 도메인이 원자값(분해될 수 없는 값)으로만 구성**

   ![img](http://cfile25.uf.tistory.com/image/9967D83359E7861E07EC1A)

   각 로우마다 컬럼의 값이 1개이다.

7. 제2 정규형

   1. **제1 정규형 이면서**

   2. **기본키에 속하지 않는 모든 속성이 기본키에 완전 함수적 종속**

   ![img](http://cfile29.uf.tistory.com/image/99589D3359E789FA30A7EF)

   ![img](http://cfile25.uf.tistory.com/image/99C5183359E789FB147BBA)

   테이블을 쪼갰다.

8. 제3 정규형

   1. **제2 정규형 이면서**

   2. **기본키에 속하지 않는 모든 속성이 기본키에 이행적 함수 종속이 아닐 경우**

      **즉, 기본키 이외의 다른 칼럼이 그 외 다른 칼럼을 결정 할 수 없다.**

   ![img](http://cfile3.uf.tistory.com/image/99E0403359E78AEE2B39CF)

   zip코드로 street, city, state가 결정되기 때문에, 이 칼럼들 간 중복 데이터 발생

   ![img](http://cfile8.uf.tistory.com/image/994C193359E78C5E4A16DB)

   테이블을 쪼갰다.

9. BCNF 정규형 (Boyce and Codd Nromal Form)

   제3 정규형을 강화한 것

   BCNF 정규형은 제3 정규형에 속하지만, 역은 아니다.

   ![img](http://cfile9.uf.tistory.com/image/1211BE3650DFB557132C70)

   1. **제 3정규형 이면서**
   2. **모든 결정자가 후보키**

   ![img](http://cfile29.uf.tistory.com/image/172B0D3B50DFB5450E26A7)

   교수는 기본키가 아니기 때문에 교수 데이터를 삽입, 삭제, 갱신이상이 발생한다.

   ![img](http://cfile25.uf.tistory.com/image/1620713B50DFB5451903D6)

   테이블을 쪼갰다.

10. 제4 정규형

    1. **비당연 MVD A -> B가 존재하고**
    2. **모든 속성도 A에 함수 종속일 경우**

    ![img](https://mblogthumb-phinf.pstatic.net/data19/2006/5/24/48/4nf_mvd_01-jinsol1.gif?type=w210)

    문제의 릴레이션

    ![img](http://postfiles1.naver.net/data19/2006/5/24/160/4nf_mvd_03-jinsol1.gif?type=w3)

    자격증과 언어는 프로그래머|자격증, 프로그래머|언어를 통해 join 된다.

11. 제5 정규형

    **모든 조인 종속이 후보키를 통해서만 성립**

    ![img](https://mblogthumb-phinf.pstatic.net/data19/2006/5/24/278/5nf_mvd_01-jinsol1.gif?type=w210)

    문제의 릴레이션

    ![img](http://postfiles1.naver.net/data18/2006/5/24/144/5nf_mvd_03-jinsol1.gif?type=w3)

    모두 join을 통해 이어진다.

## 4.데이터 베이스 설계

1. 개념적 설계

   개념 스키마 모델링과 트랜잭션 모델링을 병행적으로 수행하는 단계

   * 개념 스키마 모델링 : 요구 조건 분석 결과를 ERD같은 DBMS에 독립적이고 고차원적인 표현 기법으로 기술하는 과정
   * 트랜잭션 모델링 : 트랜잭션의 입출력과 기능적 형태만 주로 정의

2. 논리적 설계

   * 개념적 설계를 바탕으로 사용할 DBMS이 어떤 모델을 지원하는가를 파악하여 그 지원 모델에 일치하게 논리적 데이터 모델로 변환시키는 단계
   * 트랜잭션에 대한 인터페이스 설계
   * 설계에 논리적 데이터 모델을 이용
   * 스키마에 대한 평가 및 정제 작업이 이루어진다.

3. 물리적 설계

   * 논리적 설계를 바탕으로 물리적으로 구현 가능하도록 설계하는 것
   * 데이터베이스에 포함될 여러 파일 타입에 대한 저장 레코드의 양식, 순서, 접근 경로를 설계하며 성능에 중대한 영향을 미치게 된다.
   * 물리적 설계 사항
     * 저장될 레코드의 양식 설계 : 데이터 타입, 접근 횟수, 데이터 값의 분포 등을 고려하여 저장 레코드의 양식을 설계
     * 저장될 레코드들의 분포 및 집중에 관한 설계 : 물리적으로 연속적 저장이 효율적
     * 접근 경로의 설계 : 데이터를 어떻게 저장하고, 어떤 방법으로 가져다 쓸 것인지에 대한 접근 방법을 설계, 인덱스를 설계
   * 물리적 설계 옵션 선택 시 고려 사항
     * 응답 시간 : 트랜잭션을 실행시키기 위해 시스템에 입력하여 결과가 나올 때 까지 소요되는 시간
     * 저장 공간의 효율화 : DB구축에 필요한 모든 파일과 구조들을 저장하기 위한 최소한의 효율적 공간
     * 트랜잭션 처리도 : 단위 시간에 DB가 처리할 수 있는 평균 트랜잭션의 수


## 5.용어

Mysql 기준

1. Attribute(속성) : 컬럼, 필드, 객체의 속성
2. Domain(도메인) : 값의 범위
3. Tuple(튜플) : 하나의 객체, 한 행
4. Relation(릴레이션) : 테이블
5. Degree(차수) : 컬럼/필드의 수
6. Cardinality(카디널리티) : 튜플의 개수, 레코드의 수
7. NULL(널) : 0과 공백과는 다르다.
8. Model(모델) : 컨트롤러 -> 뷰에 전달되는 데이터
9. Entity(엔티티) : 테이블, 릴레이션과 같다.
10. System Catalog(시스템 카탈로그) : 시스템이 필요로 하는 데이터 베이스, 테이블, 뷰, 인덱스, 사용자, 응용 계획, 접근 권한, 무결성, 제약 조건에 관한 모든 정보를 메타 데이터 형태로 가지고 있는 시스템 데이터베이스, `데이터사전`이라고도 한다.

## 6.트랜잭션

* DB에서 일어나는 연산의 집합
* 하나의 논리적 기능을 수행하기 위한 작업의 단위
* DB에의 상태를 하나의 일관된 상태에서 다른 일관된 상태로 변환시킨다.
* 병행 제어 및 회복 작업의 논리적 작업 단위
* 하나의 트랜잭션은 Commit / Rollback 되어야 한다.

**트랜잭션의 특성(ACID)**

1. Atomicity 원자성
   * 트랜잭션의 가장 중요한 성질
   * 트랜잭션은 연산의 집단을 의미하지만, 논리적으로 `하나`라는 뜻이다.
   * 트랜잭션은 분리해서 일할 수 없다. 따라서 `일부의 완료`는 존재 할 수 없다.
   * 트랜잭션의 연산은 모두 반영되던지 `All`, 전혀 반영되지 않아야 한다 `Nothing`.
2. Consistency 일관성
   * 고정 요소는 트랜잭션 실해 전과 후가 같아야 한다.
   * 트랜잭션이 실행되고 나서도 DB상태는 무결성이 유지되고 모순되지 말아야 한다.
3. Isolation 독립성, 격리성
   * 트랜잭션이 실행되는 중간에는 다른 트랜잭션 연산이 침범하지 못한다.
   * 같은 자원에 대해 여러 개의 트랜잭션이 동시에 사용할 수 없다.
4. Durability 영속성, 지속성, 계속성
   * 트랜잭션에 의해서 변화된 상태는 계속해서 유지되야 한다.
   * 트랜잭션이 성공적인 완료를 응답했다면, 트랜잭션 완료의 효과는 지속되어야 한다.

----

**1 ~ 6장의 모든 내용의 권리는 2018 정보처리기사(영진 닷컴 출판사) 에 있습니다.** 